{
  "hash": "eafeaa94a00a7f838b3df342749b3b75",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Mercado Fichajes Era Dorada del Fútbol\"\ndescription: |\n  2001-2019\nauthor:   \n  - Simon Casañ (sicaol@alumni.uv.es)\ndate: 2026-01-05                           \ncategories: [trabajo BigData, Futbol, Mercado]      \nimage: \"./imagenes/edit_mercado.jpeg\"\ntitle-block-banner: \"#0e1e5b\"\ntitle-block-banner-color: \"white\"    \ntoc-depth: 3\nsmooth-scroll: true\nformat: \n  html:\n    link-external-newwindow: true\n    code-fold: true\n    code-fold-show: false\nexecute:\n  warning: false\n  message: false\n\ncode-tools: true\ncode-link: true\n---\n\n---\n\n\n## INTRODUCCIÓN\n\nEl mercado de fichajes son unos de los meses más entretenidos del fútbol, en verano y en invierno se abre el mercado de fichajes donde clubes de todo el mundo venden y compran jugadores. Los que mejor mercado realicen consiguen grandes ventajas ya sea futbolisticas como económicas, y es uno de los puntos que marcan la diferencia entre ser o no uno de los mejores equipos del mundo.\n\nA continuación, haré un analisis del mercado de la época dorada del futbol, las dos primeras décadas del siglo, donde se alcanzó el máximo nivel futbolístico jamás visto en un campo. Y veremos cómo ha evolucionado estos años.\n\n\n# DATOS\n\nPara realizar el trabajo, he sacado los datos de la pagina webb Kaggle, una web la cual contiene millones de datos, y entre ellos, de los mercados año a año. Aquí teneis el [enlace](https://www.kaggle.com/){target=\"_blank\"}\n\n------------------------------------------------------------------------\n\n## 1. EVOLUCION PRECIO MEDIO\n\nDurante estos años el precio medio de los fichajes ha ido creciendo. He elegido los 10 fichajes más caros de cada año como representativo del mercado, podemos ver que desde 2012 los precios comienzan a dispararse, hasta llegar al pico en 2018, año del fichaje más caro de la historia, el de Neymar; para posteriormente bajar, debido al covid. Entre el año 2004 y 2018 pasamos de una media de aprox. 20 M a 100M, es decir, el precio de los \"cracks\" se quintuplica.\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\n\ndatikos <- \"./datos/top250-00-19.csv\"\n\ndf_completo <- read_csv(datikos)\n\ntop10_x_año <- df_completo %>% \n  mutate(Transfer_fee = as.numeric(Transfer_fee)) %>% \n  mutate(Season = parse_number(Season) + 1) %>%\n  group_by(Season) %>%\n  slice_max(order_by = Transfer_fee, n = 10, with_ties = FALSE) %>%\n  ungroup() %>%\n  select(Season, Transfer_fee)\n\nev_precio_medio <- top10_x_año %>%\n  group_by(Season) %>%\n  summarise(\n    precio_medio = mean(Transfer_fee, na.rm = TRUE),\n    n_fichajes = n()\n  ) %>%\n  ungroup()\n\n  \ngrafico_lineal <- ggplot(ev_precio_medio, aes(x = Season, y = precio_medio)) +\n  geom_line(color = \"dodgerblue3\", linewidth = 1.2) +\n  geom_point(color = \"dodgerblue3\", size = 2) +\n  scale_x_continuous(breaks = seq(min(ev_precio_medio$Season),max(ev_precio_medio$Season),by = 1)) +\n  scale_y_continuous(labels = scales::comma, breaks = scales::pretty_breaks(n = 8)) +\n  labs(title = \"Evolución del precio medio de los top 10 fichajes\",\n    subtitle = \"2001–2019\",\n    x = \"Temporada\",\n    y = \"Precio medio (€)\") +\n  theme_minimal() +\n  theme(plot.title = element_text(face = \"bold\", size = 14))\n\ngrafico_lineal\n\n```\n\n::: {.cell-output-display}\n![](my_trabajo_BigData_files/figure-html/unnamed-chunk-1-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n\n## 2. FICHAJES MÁS CAROS DE LA HISTORIA\n\nEn estos años se supero la barrera de los 100 M de euros pagados por un jugador por primera vez en la historia, con el fichaje de Gareth Bale por el Real Madrid, y también realizó el fichaje más caro de la historia del fútbol cuando el PSG fichó a Neymar por 222 M, nunca se ha vuelto a ver una cantidad ni siquiera parecida. A parte, en el top podemos ver algunos fichajes muy existosos como el de Cristiano Ronaldo por el Real Madrid en 2009, o algunos otros desastrosos como el de Coutinho al Barça por 125 M\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggimage)\n\ndatikos <- \"./datos/top250-00-19.csv\"\n\ndf_completo <- read_csv(datikos)\n\n\ntop_15_fichajes <- df_completo %>%\n  select(Name, Season, Transfer_fee) %>% \n  mutate(Transfer_fee = as.numeric(Transfer_fee)) %>% \n  arrange(desc(Transfer_fee)) %>%\n  head(15)\n\n\n\ndf_caras <- data.frame(Name = c(\n  \"Neymar\",\n  \"Kylian Mbappé\",\n  \"Philippe Coutinho\",\n  \"Cristiano Ronaldo\",\n  \"Ousmane Dembélé\",\n  \"Paul Pogba\",\n  \"Gareth Bale\",\n  \"Cristiano Ronaldo\",\n  \"Gonzalo Higuaín\",\n  \"Neymar\",\n  \"Romelu Lukaku\",\n  \"Luis Suárez\",\n  \"Virgil van Dijk\",\n  \"Zinédine Zidane\",\n  \"Kevin De Bruyne\"\n),\nFoto = c(\n  \"ney\",\n  \"mbappe\",\n  \"coutinho\",\n  \"elbicho\",\n  \"dembele\",\n  \"pogba\",\n  \"bale\",\n  \"elbicho\",\n  \"pipita\",\n  \"ney\",\n  \"lakaka\",\n  \"suarez\",\n  \"van di\",\n  \"zizu\",\n  \"debruine\"\n)\n) %>%\n  mutate(logo = file.path(\"imagenes\", paste0(Foto, \".png\")))\n\n\n\ntop_15_completo <- top_15_fichajes %>%\n  left_join(df_caras, by = \"Name\") %>%\n  arrange(desc(Transfer_fee)) %>%\n  mutate(\n    etiqueta = paste0(Name, \" (\", Season, \") #\", row_number()),\n    logo = file.path(\"imagenes\", paste0(Foto, \".png\"))\n  )\n\ntop_15_completo <- top_15_completo[-c(2, 6, 11, 14), ] #borro esas filas maualmente porque no se porque se me duplicaban esos fichajes\n\n\n\n\n\nmi_grafico <- ggplot(top_15_completo, aes(x = reorder(etiqueta, Transfer_fee), y = Transfer_fee)) +\n  geom_col(fill = \"dodgerblue3\", width = 0.6) +\n  coord_flip() +\n  geom_image(aes(image = logo, y = 0), size = 0.05) +\n  geom_text(\n    aes(label = Season, y = max(Transfer_fee) * 0.02),\n    hjust = 0,\n    size = 3,\n    color = \"black\"\n  ) +\n  geom_text(\n    aes(label = scales::comma(Transfer_fee)),\n    hjust = -0.2,\n    fontface = \"bold\",\n    size = 3.5) +\n  scale_y_continuous(labels = scales::comma) + \n  expand_limits(y = 0) + \n  labs(\n    title = \"Top 15 Fichajes Mas Caros\",\n    subtitle = \"Desde 2000-2018\",\n    x = \"Jugadores\", \n    y = \"Precio Pagado\") +\n  theme_minimal()+\n  theme(\n    plot.title = element_text(face = \"bold\", size = 14),\n    axis.text.y = element_blank(),\n    axis.ticks.y = element_blank(),\n    plot.margin = margin(10, 20, 10, 20))\n\nmi_grafico\n\n```\n\n::: {.cell-output-display}\n![](my_trabajo_BigData_files/figure-html/unnamed-chunk-2-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## 3. ACTUALIDAD\n\nEn este caso, he hecho una especie de busqueda para ver que tanto han cambiado, el perfil de los jugadores caros. En las 2 primeras décadas del siglo los jugadores más caros de media fueron, Extremos izquierdos, de la liga española, y de 33 años. Con esas características solo encontramos 2 jugadores en la actualidad, James Rodriguez y Rubén Peña; que pese a no dudar de su calidad, distan mucho de ser los jugadores más caros del mundo como si que lo son: Lamine Yamal, Haaland, Mbappé (el único que aparecía en el top), Bellingam y Vini Jr. En cuanto a las posiciones y la liga no han variado tanto las preferencias de los equipos, donde si se aprecia la diferencia es en la edad de ellos ya que todos tienen alrededor de 20 años. \n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(magick)\n\n\ndatikos <- \"./datos/top250-00-19.csv\"\n\ndf_completo <- read_csv(datikos)\n\nliga_ranking <- df_completo %>%\n  mutate(League_from = str_replace(League_from,\n                              \"Rel. Ligue 1\", \"Ligue 1\")) %>%\n  group_by(League_from) %>%\n  summarise(\n    precio_medio = mean(Transfer_fee, na.rm = TRUE),\n    n_fichajes = n()\n  ) %>%\n  arrange(desc(precio_medio))\n\n\n\nedad_ranking <- df_completo %>%\n  group_by(Age) %>%\n  summarise(\n    precio_medio = mean(Transfer_fee, na.rm = TRUE),\n    n_fichajes = n()\n  ) %>%\n  arrange(desc(precio_medio))\n\n\nposicion_ranking <- df_completo %>%\n  group_by(Position) %>%\n  summarise(\n    precio_medio = mean(Transfer_fee, na.rm = TRUE),\n    n_fichajes = n()\n  ) %>%\n  arrange(desc(precio_medio))\n\n\n\njugadores <- \"./datos/database.csv\"\n\ndf_jugadores <- read_csv(jugadores)\n\ndf_jugadores <- df_jugadores %>%\n  mutate(Age = as.numeric(str_extract(Age, \"^[0-9]+\")))%>%\n  filter(str_detect(Position, \"LW\"))%>%\n  filter(Age==33)%>%\n  slice(-3)  #me aparecía un jugador repetido y por eso lo elimino\n\n\njames <- image_read(\"./imagenes/james.jpeg\") %>% image_scale(.,\"700\")\npeña <- image_read(\"./imagenes/peñ.jpeg\") %>% image_scale(.,\"700\")\n\nequipos <- c(james, peña)\nimage_animate(image_scale(equipos), fps = 0.25)\n```\n\n::: {.cell-output-display}\n![](my_trabajo_BigData_files/figure-html/unnamed-chunk-3-1.gif){fig-align='center' width=95%}\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n\n## 4. PAISES\n\nPor último, podemos ver que el Chelsea ha sido el equipo que más ha gastado, seguido del City, Real Madrid, FC Barcelona y Manchester United. Todos ellos equipos Ingleses y Españoles. Si hiceramos este estudio en los últimos 5 años probablemente viesemos desaparecer los equipos españoles y aparecer varios equipos de Oriente Medio.\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(highcharter)  \n\ndatikos <- \"./datos/top250-00-19.csv\"\n\ndf_completo <- read_csv(datikos)\n\ntop_5_equipos <- df_completo %>%\n  group_by(Team_to) %>%\n  summarise(gasto_total = sum(Transfer_fee, na.rm = TRUE)) %>%\n  slice_max(gasto_total, n = 5)\n\n\n\nhchart(top_5_equipos, \"pie\", hcaes(x = Team_to, y = gasto_total)) %>%\n  hc_add_theme(hc_theme_economist()) %>% \n  hc_size(height = 500)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"htmlwidget-098b8989749c88d37fd0\" style=\"width:95%;height:500px;\" class=\"highchart html-widget\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-098b8989749c88d37fd0\">{\"x\":{\"hc_opts\":{\"chart\":{\"reflow\":true,\"height\":500},\"title\":{\"text\":null},\"yAxis\":{\"title\":{\"text\":\"gasto_total\"},\"type\":\"linear\"},\"credits\":{\"enabled\":false},\"exporting\":{\"enabled\":false},\"boost\":{\"enabled\":false},\"plotOptions\":{\"series\":{\"label\":{\"enabled\":false},\"turboThreshold\":0,\"showInLegend\":false},\"treemap\":{\"layoutAlgorithm\":\"squarified\"},\"scatter\":{\"marker\":{\"symbol\":\"circle\"}}},\"series\":[{\"group\":\"group\",\"data\":[{\"Team_to\":\"Chelsea\",\"gasto_total\":1820650000,\"y\":1820650000,\"name\":\"Chelsea\"},{\"Team_to\":\"Man City\",\"gasto_total\":1800520000,\"y\":1800520000,\"name\":\"Man City\"},{\"Team_to\":\"Real Madrid\",\"gasto_total\":1680650000,\"y\":1680650000,\"name\":\"Real Madrid\"},{\"Team_to\":\"FC Barcelona\",\"gasto_total\":1673040000,\"y\":1673040000,\"name\":\"FC Barcelona\"},{\"Team_to\":\"Man Utd\",\"gasto_total\":1497360000,\"y\":1497360000,\"name\":\"Man Utd\"}],\"type\":\"pie\"}],\"xAxis\":{\"type\":\"category\",\"title\":{\"text\":\"Team_to\"},\"categories\":null}},\"theme\":{\"colors\":[\"#6794a7\",\"#014d64\",\"#76c0c1\",\"#01a2d9\",\"#7ad2f6\",\"#00887d\",\"#adadad\",\"#7bd3f6\",\"#7c260b\",\"#ee8f71\",\"#76c0c1\",\"#a18376\"],\"chart\":{\"backgroundColor\":\"#d5e4eb\",\"style\":{\"fontFamily\":\"Droid Sans\",\"color\":\"#3C3C3C\"}},\"title\":{\"align\":\"left\",\"style\":{\"fontWeight\":\"bold\"}},\"subtitle\":{\"align\":\"left\"},\"yAxis\":{\"gridLineColor\":\"#FFFFFF\",\"lineColor\":\"#FFFFFF\",\"minorGridLineColor\":\"#FFFFFF\",\"tickColor\":\"#D7D7D8\",\"tickWidth\":1,\"title\":{\"style\":{\"color\":\"#A0A0A3\"}}},\"tooltip\":{\"backgroundColor\":\"#FFFFFF\",\"borderColor\":\"#76c0c1\",\"style\":{\"color\":\"#000000\"}},\"legend\":{\"itemStyle\":{\"color\":\"#3C3C3C\"},\"itemHiddenStyle\":{\"color\":\"#606063\"}},\"credits\":{\"style\":{\"color\":\"#666\"}},\"labels\":{\"style\":{\"color\":\"#D7D7D8\"}},\"drilldown\":{\"activeAxisLabelStyle\":{\"color\":\"#F0F0F3\"},\"activeDataLabelStyle\":{\"color\":\"#F0F0F3\"}},\"navigation\":{\"buttonOptions\":{\"symbolStroke\":\"#DDDDDD\",\"theme\":{\"fill\":\"#505053\"}}},\"legendBackgroundColor\":\"rgba(0, 0, 0, 0.5)\",\"background2\":\"#505053\",\"dataLabelsColor\":\"#B0B0B3\",\"textColor\":\"#C0C0C0\",\"contrastTextColor\":\"#F0F0F3\",\"maskColor\":\"rgba(255,255,255,0.3)\"},\"conf_opts\":{\"global\":{\"Date\":null,\"VMLRadialGradientURL\":\"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png\",\"canvasToolsURL\":\"http =//code.highcharts.com/list(version)/modules/canvas-tools.js\",\"getTimezoneOffset\":null,\"timezoneOffset\":0,\"useUTC\":true},\"lang\":{\"contextButtonTitle\":\"Chart context menu\",\"decimalPoint\":\".\",\"downloadCSV\":\"Download CSV\",\"downloadJPEG\":\"Download JPEG image\",\"downloadPDF\":\"Download PDF document\",\"downloadPNG\":\"Download PNG image\",\"downloadSVG\":\"Download SVG vector image\",\"downloadXLS\":\"Download XLS\",\"drillUpText\":\"◁ Back to {series.name}\",\"exitFullscreen\":\"Exit from full screen\",\"exportData\":{\"annotationHeader\":\"Annotations\",\"categoryDatetimeHeader\":\"DateTime\",\"categoryHeader\":\"Category\"},\"hideData\":\"Hide data table\",\"invalidDate\":null,\"loading\":\"Loading...\",\"months\":[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],\"noData\":\"No data to display\",\"numericSymbolMagnitude\":1000,\"numericSymbols\":[\"k\",\"M\",\"G\",\"T\",\"P\",\"E\"],\"printChart\":\"Print chart\",\"resetZoom\":\"Reset zoom\",\"resetZoomTitle\":\"Reset zoom level 1:1\",\"shortMonths\":[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],\"shortWeekdays\":[\"Sat\",\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\"],\"thousandsSep\":\" \",\"viewData\":\"View data table\",\"viewFullscreen\":\"View in full screen\",\"weekdays\":[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]}},\"type\":\"chart\",\"fonts\":\"Droid+Sans\",\"debug\":false},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n\n## 5. CONCLUSION\n\nEspero que haya sido de agrado leer este trabajo del mercado de fichajes y os haya ayudado a ver los cambios de tendencia entre el fútbol moderno y el de principios del siglo, aparte de poder haber conocido alguna curiosidad sobre este.\n",
    "supporting": [
      "my_trabajo_BigData_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<script src=\"site_libs/jquery-3.5.1/jquery.min.js\"></script>\n<script src=\"site_libs/proj4js-2.3.15/proj4.js\"></script>\n<link href=\"site_libs/highcharts-9.3.1/css/motion.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/highcharts-9.3.1/highcharts.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/highcharts-3d.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/highcharts-more.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/stock.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/map.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/data.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/exporting.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/offline-exporting.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/drilldown.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/item-series.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/overlapping-datalabels.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/annotations.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/export-data.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/funnel.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/heatmap.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/treemap.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/sankey.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/dependency-wheel.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/organization.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/solid-gauge.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/streamgraph.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/sunburst.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/vector.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/wordcloud.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/xrange.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/tilemap.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/venn.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/gantt.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/timeline.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/parallel-coordinates.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/bullet.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/coloraxis.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/dumbbell.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/lollipop.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/series-label.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/plugins/motion.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/custom/reset.js\"></script>\n<script src=\"site_libs/highcharts-9.3.1/modules/boost.js\"></script>\n<script src=\"site_libs/highchart-binding-0.9.4/highchart.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}